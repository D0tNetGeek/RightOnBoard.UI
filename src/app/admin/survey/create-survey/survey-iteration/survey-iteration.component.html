<div class="main-content">
  <div class="container-fluid">
    <p class="bg-primary text-justify pageHeader">Survey Iterations
      <button mat-raised-button type="submit" class="btn btn-sm btn-danger pull-right " (click)="addNewTrigger(template)">Add New Iteration</button>
    </p>

    <div class="clearfix"></div>
    <table class="table table-hover table-bordered ">
      <thead>
        <tr>
          <th>#</th>
          <th>Iteration Name</th>
          <th>Open Date</th>
          <th>Close Date</th>
          <th>Remainder Date</th>
          <th>Remainder Freequency</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let iteration of surveyObj!.surveyIterations; let i = index ">
          <td>{{i+1}}</td>
          <td>{{iteration.iterationName}}</td>
          <td>{{iteration.openDateTime}}</td>
          <td>{{iteration.closeDateTime}}</td>
          <td>{{iteration.reminderDateTime}}</td>
          <td>{{iteration.reminderFrequency}}</td>
          <td>
            <button mat-raised-button type="submit" class="btn btn-sm btn-info" (click)="editIteration(iteration,template)">Edit</button>
            <button mat-raised-button type="submit" class="btn btn-sm btn-danger" (click)="deleteIteration(iteration)">
              <i class="material-icons">delete</i>
            </button>
          </td>

        </tr>
        <!--<tr *ngIf="surveyObj!.surveyIterations.length==0">
          <td colspan=100%>No Iterations Yet</td>
        </tr>-->
      </tbody>
    </table>
    <!--<button mat-raised-button type="submit" class="btn btn-sm btn-danger pull-lefy"  (click)="previousTab('info')">Previous</button>
   <button mat-raised-button type="submit" class="btn btn-sm btn-danger pull-right" [disabled]="surveyObj.surveyIterations.length==0" [ngClass]="{'btndisabled':surveyObj.surveyIterations.length==0}"
      (click)="nextTab('groups')">Next</button>-->
    <div class="clearfix"></div>
  </div>
</div>
<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Create New Iteration</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="main-content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-12">

            <form>
              <div class="row">
                <div class="col-md-12">
                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="Survey Name" [ngModelOptions]="{standalone: true}" [(ngModel)]="surveyObj.surveyInfo.name" maxlength="100"
                      readonly>
                  </mat-form-field>
                </div>
              </div>

              <div class="row">
                  <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                      <input matInput placeholder="Iteration Name" [ngModelOptions]="{standalone: true}" [(ngModel)]="iteration.iterationName" maxlength="100" required>
                    </mat-form-field>
                  </div>
              </div>


              <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="Open Date" (change)="validate()" [ngModelOptions]="{standalone: true}" [(ngModel)]="iteration.openDateTime"
                      type="date" required>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="Close Date" (change)="validate()" [ngModelOptions]="{standalone: true}" [(ngModel)]="iteration.closeDateTime"
                      type="date" required>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="Reminder Date" (change)="validate()"  [ngModelOptions]="{standalone: true}" [(ngModel)]="iteration.reminderDateTime"
                      type="date" required>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="example-full-width">
                    <input matInput placeholder="Reminder Freequency" [ngModelOptions]="{standalone: true}" [(ngModel)]="iteration.reminderFrequency"
                      min="0" max="100" type="number" required>
                  </mat-form-field>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12 alert alert-danger" *ngIf="errorMesssage!=''">
                  <strong>Error! </strong>
                  {{errorMesssage}}
                </div>
              </div>
              <button mat-raised-button type="submit" class="btn btn-danger pull-right" [disabled]="isDisabledInfo()" [ngClass]="{'btndisabled':isDisabledInfo()}"
                (click)="addIteration()">Add to List</button>
              <div class="clearfix"></div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>